/**
 * backbone.unclassified.js v0.1.3 - Declarative child elements for Backbone Views
 * https://github.com/willurd/backbone.unclassified.js
 *
 * Copyright (c) 2013 William Bowers <william.bowers@gmail.com>
 * Released under the MIT license
 * https://github.com/willurd/backbone.unclassified.js/blob/master/LICENSE.txt
 */
!function(){function a(a,b,c){a[b]=c(a[b])||a[b]}function b(a,b){return"function"==typeof a[b]?a[b]():a[b]}function c(a,b){var c;if("function"==typeof a.find)return a.find(b);if("function"==typeof a.down)return a.down(b);if("function"==typeof a.query)return a.query(b);if(Backbone.$.length>=2){try{if(c=Backbone.$(b,a),c.length>0)return c}catch(d){}try{for(var e=[],f=0,g=a.length;g>f;f++)e.push.apply(e,Backbone.$(b,a[f]));return c=Backbone.$(e),i(c)&&0===c.length?e:c}catch(d){}}return console.error("Unable to make a child selection with the installed selector engine"),[]}function d(a,b,c){var d={};for(var e in a){var f=b.call(c||this,e,a[e],d);"undefined"!=typeof f&&(d[e]=f)}return d}function e(a,b){var d=c(a,b);return d.refresh=function(){var d;for(d=0,len=this.length;len>d;d++)delete this[d];this.length=0;var e=h.call(c(a,b));if("function"==typeof this.push)this.push.apply(this,e);else{for(d=0,len=e.length;len>d;d++)this[d]=e[d];this.length=e.length}return this},d.refresh.unclassified=j,d}function f(a,b,c,g){return c?"string"==typeof c?e(a,b[g]=c):d(c,function(d){var e=g?g+"."+d:d;return f(a,b,c[d],e)}):void 0}if("undefined"==typeof Backbone)return console.error("backbone.unclassified must be included after backbone");var g=Object.prototype.toString,h=Array.prototype.slice,i=Array.isArray||function(a){return"[object Array]"===g.call(a)},j={};a(Backbone.View.prototype,"setElement",function(a){return function(){var b=a.apply(this,arguments);return this._uiSelectorMap={},this.ui=f(this.$el,this._uiSelectorMap,this.constructor.prototype.ui),b}}),a(Backbone.View.prototype,"delegateEvents",function(a){var c=/^(\S+)\s*(.*)$/;return function(e){return e||(e=b(this,"events"))?a.call(this,d(e,function(a,b,d){var e=a.match(c),f=e[1],g=e[2],h=g?" "+(this._uiSelectorMap[g]||g):"";d[f+h]=b},this)):this}}),Backbone.View.prototype.refreshUi=function(a){a=a||this.ui;for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];"function"==typeof c.refresh&&c.refresh.unclassified===j?c.refresh():this.refreshUi(c)}}}();
